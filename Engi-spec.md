# NFR Table – Vault Agent, Venafi PKI Engine & Venafi TPP

| Requirement            | Type                     | Description                                                                                                                                   | Measure                                                                 |
|------------------------|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
| **Certificate Issuance** | Availability / Performance | Venafi TPP generates certificates and key pairs. Vault Venafi PKI engine requests issuance and stores the cert/metadata in Vault. Vault Agent only fetches and injects into workloads. | SLA of Venafi TPP API ≥ 99.9% uptime. Latency ≤ 2s per issuance. Vault must persist cert until renewal. |
| **Storage**            | Security / Compliance    | Vault stores issued certs and metadata (lease, TTL) to avoid re-issuance. Private keys may also be stored depending on configuration. Vault Agent never persists, only injects. TPP stores lifecycle metadata. | Certs stored in Vault’s storage backend (encrypted). No certs/keys at rest on Vault Agent. Compliance checked via Vault audit logs. |
| **Renewal**            | Availability / Reliability | Vault Venafi PKI engine handles auto-renewal before expiry using stored lease info. Vault Agent auto-fetches the renewed cert for workloads. No need to re-issue until expiry. | Auto-renew threshold ~2/3rd of cert lifetime. Renewal success rate ≥ 99%. |
| **Expiry Handling**    | Reliability              | Venafi TPP enforces validity periods. Vault tracks TTL and requests renewal before expiry. Expired certs are replaced with new issuance via TPP. | Alerts/logs for expiry within threshold (e.g., 7 days). No expired certs injected. |
| **Revocation**         | Security / Compliance    | Revocation is executed via Venafi TPP. Vault Venafi PKI engine can trigger revocation through TPP APIs. Revoked certs appear in CRL/OCSP. Vault ensures revoked certs are not injected. | Revocation SLA ≤ 2s. Revoked cert visible in CRL/OCSP ≤ 15 min. Vault must reject revoked certs. |
